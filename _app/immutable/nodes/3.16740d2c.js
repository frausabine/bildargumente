import{_ as Le}from"../chunks/preload-helper.41c905a7.js";import{S as Ie,i as Ee,s as we,k as L,q as Q,a as X,l as N,m as C,r as Z,h as m,c as H,n as p,b as P,G as M,u as _e,H as Y,I as se,o as Ye,R as le,L as Ne,M as J,T as Xe,N as Se,j as Tt,U as Dt,e as W,J as Te,V as Me,W as Ae,w as ye,K as Ce,g as B,v as oe,d as F,f as fe,y as he,z as me,A as pe,B as ge,X as ve,Y as ke,Z as Ve,_ as Bt,O as Ft,p as Gt}from"../chunks/index.7c5e5199.js";import{b as ue,m as Ut,e as Wt,t as ze,a as Ue,i as Qe,c as Xt}from"../chunks/setup.81c1d722.js";import{w as be,e as Ht}from"../chunks/singletons.86f43f53.js";import{p as Jt}from"../chunks/stores.b97c0998.js";const Yt=async()=>{const e=Object.entries(Object.assign({"/src/routes/texts/01_Bayeux.md":()=>Le(()=>import("../chunks/01_Bayeux.c6bd8ede.js"),["../chunks/01_Bayeux.c6bd8ede.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/02_Medicizyklus.md":()=>Le(()=>import("../chunks/02_Medicizyklus.e899c820.js"),["../chunks/02_Medicizyklus.e899c820.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/03_Breda.md":()=>Le(()=>import("../chunks/03_Breda.b4c4ea54.js"),["../chunks/03_Breda.b4c4ea54.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/template.md":()=>Le(()=>import("../chunks/template.a5165ba3.js"),["../chunks/template.a5165ba3.js","../chunks/index.7c5e5199.js"],import.meta.url)}));return await Promise.all(e.map(async([t,s])=>{const n=await s(),{html:r}=n.default.render(),a=t.slice(17,-3),o=/<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)\1/g,c=[...r.matchAll(o)].map(u=>u[2]).filter(u=>!u.startsWith("http")).map(u=>{const f=u.lastIndexOf("/");return f!==-1?u.substring(f+1):u});return{meta:n.metadata,path:a,text:r,links:c}}))},Qt=async({fetch:i})=>({posts:await(await i("/api/posts")).json()}),Zt=async()=>(await Yt()).sort().map(l=>({slug:l.path.replaceAll("/","")})),Zl=Object.freeze(Object.defineProperty({__proto__:null,entries:Zt,load:Qt},Symbol.toStringTag,{value:"Module"})),He=be(""),Be=be(""),Pe=be(!1),Ze=be([]),de=be([]),qe=be([]),Oe=be(0);function Re(i){var s;let e,l=((s=i[0].meta)==null?void 0:s.description)+"",t;return{c(){e=L("div"),t=Q(l),this.h()},l(n){e=N(n,"DIV",{class:!0});var r=C(e);t=Z(r,l),r.forEach(m),this.h()},h(){p(e,"class","description svelte-10gblkc")},m(n,r){P(n,e,r),M(e,t)},p(n,r){var a;r&1&&l!==(l=((a=n[0].meta)==null?void 0:a.description)+"")&&_e(t,l)},d(n){n&&m(e)}}}function Ke(i){let e,l=i[0].meta.author+"",t;return{c(){e=L("div"),t=Q(l),this.h()},l(s){e=N(s,"DIV",{class:!0});var n=C(e);t=Z(n,l),n.forEach(m),this.h()},h(){p(e,"class","author svelte-10gblkc")},m(s,n){P(s,e,n),M(e,t)},p(s,n){n&1&&l!==(l=s[0].meta.author+"")&&_e(t,l)},d(s){s&&m(e)}}}function je(i){var n;let e,l,t=((n=new Date(i[0].meta.date))==null?void 0:n.toLocaleDateString(i[0].meta.lang,{day:"numeric",month:"long",year:"numeric"}))+"",s;return{c(){e=L("div"),l=L("div"),s=Q(t),this.h()},l(r){e=N(r,"DIV",{class:!0});var a=C(e);l=N(a,"DIV",{class:!0});var o=C(l);s=Z(o,t),o.forEach(m),a.forEach(m),this.h()},h(){p(l,"class","date svelte-10gblkc"),p(e,"class","date svelte-10gblkc")},m(r,a){P(r,e,a),M(e,l),M(l,s)},p(r,a){var o;a&1&&t!==(t=((o=new Date(r[0].meta.date))==null?void 0:o.toLocaleDateString(r[0].meta.lang,{day:"numeric",month:"long",year:"numeric"}))+"")&&_e(s,t)},d(r){r&&m(e)}}}function Rt(i){var A,D,V;let e,l,t,s,n=i[0].meta.title+"",r,a,o,c,u,f,d,_=((A=i[0].meta)==null?void 0:A.description)&&Re(i),y=((D=i[0].meta)==null?void 0:D.author)&&Ke(i),S=((V=i[0].meta)==null?void 0:V.date)&&je(i);return{c(){e=L("a"),l=Q("← Index"),t=X(),s=L("h1"),r=Q(n),a=X(),_&&_.c(),o=X(),c=L("div"),y&&y.c(),u=X(),S&&S.c(),f=X(),d=L("div"),this.h()},l(h){e=N(h,"A",{href:!0,class:!0,rel:!0});var g=C(e);l=Z(g,"← Index"),g.forEach(m),t=H(h),s=N(h,"H1",{class:!0});var v=C(s);r=Z(v,n),v.forEach(m),a=H(h),_&&_.l(h),o=H(h),c=N(h,"DIV",{class:!0});var I=C(c);y&&y.l(I),u=H(I),S&&S.l(I),I.forEach(m),f=H(h),d=N(h,"DIV",{class:!0});var w=C(d);w.forEach(m),this.h()},h(){p(e,"href",Ht+"/"),p(e,"class","index svelte-10gblkc"),p(e,"rel","noopener noreferrer"),p(s,"class","svelte-10gblkc"),p(c,"class","metadata svelte-10gblkc"),p(d,"class","markdown svelte-10gblkc")},m(h,g){P(h,e,g),M(e,l),P(h,t,g),P(h,s,g),M(s,r),P(h,a,g),_&&_.m(h,g),P(h,o,g),P(h,c,g),y&&y.m(c,null),M(c,u),S&&S.m(c,null),P(h,f,g),P(h,d,g),d.innerHTML=i[1]},p(h,[g]){var v,I,w;g&1&&n!==(n=h[0].meta.title+"")&&_e(r,n),(v=h[0].meta)!=null&&v.description?_?_.p(h,g):(_=Re(h),_.c(),_.m(o.parentNode,o)):_&&(_.d(1),_=null),(I=h[0].meta)!=null&&I.author?y?y.p(h,g):(y=Ke(h),y.c(),y.m(c,u)):y&&(y.d(1),y=null),(w=h[0].meta)!=null&&w.date?S?S.p(h,g):(S=je(h),S.c(),S.m(c,null)):S&&(S.d(1),S=null)},i:Y,o:Y,d(h){h&&m(e),h&&m(t),h&&m(s),h&&m(a),_&&_.d(h),h&&m(o),h&&m(c),y&&y.d(),S&&S.d(),h&&m(f),h&&m(d)}}}const Kt=/\[\^([^\]]+)\]/g;let jt=100;function $t(i){const e=i.currentTarget.getAttribute("data-id"),l=document.querySelector(`.node[data-id="${e}"]`);l&&l.classList.add("hover"),i.currentTarget.classList.add("hover")}function xt(i){const e=i.currentTarget.getAttribute("data-id"),l=document.querySelector(`.node[data-id="${e}"]`);l&&l.classList.remove("hover"),i.currentTarget.classList.remove("hover")}function el(i,e,l){const t=l-e;return(i-e)/t*100}function tl(i,e,l){const t=l-e;return e+t*i/100}function ll(i,e,l){let t,s;se(i,Pe,h=>l(8,t=h)),se(i,He,h=>l(9,s=h));let{data:n}=e,{items:r}=e,{scrollTopVal:a}=e,o=n.text,c=1;const f=o.replace(/<a\s+href="([^"]+)"[^>]*>([^<]+)<\/a>/g,(h,g,v)=>{if(g.startsWith("http"))return`<a class="external" target="_blank" href="${g}" title="${v}">${v}</a>`;{let I=g.split("/")[1];return`<a class="node-highlite" unique-id="${I}" id="${g.split("/")[1]}"
				data-id="${g.split("/")[1]}" title="${v}">${v}
				<span class="symbol node" unique-id="${I}" data-id="item_${g.split("/")[1]}"
				data-class="${r.filter(w=>w.label==v).map(w=>{var z,G;return(G=(z=w.data)==null?void 0:z["@type"])==null?void 0:G[1]})}">
					●
					</span></a>`}}).replace(Kt,(h,g)=>{const v=c++;return`<sup id="fn-${v}"><a href="#fnref-${v}">${v}</a></sup><span id="fn-${v}-content">${g}</span>`}),d=Array.from({length:c-1},(h,g)=>{var w;const v=g+1,I=(w=f.match(new RegExp(`<span id="fn-${v}-content">([^<]+)</span>`)))==null?void 0:w[1];return`<li id="fnref-${v}"> ${I}</li>`}).join(""),_=`${f}
	<ol class="biblio">${d}</ol>`;let y;Ye(async()=>{l(4,y=document==null?void 0:document.querySelectorAll(".markdown a[data-id]")),A(y),y.forEach(h=>{h.addEventListener("mouseenter",$t),h.addEventListener("mouseleave",xt),h.addEventListener("click",S)})});function S(h){y.forEach(I=>{const w=I.getAttribute("data-id"),z=document.querySelector(`.node[data-id="${w}"]`);z&&z.classList.remove("clicked"),I.classList.remove("clicked")});const g=h.currentTarget.getAttribute("data-id"),v=document.querySelector(`.node[data-id="${g}"]`);v&&v.classList.toggle("clicked"),h.currentTarget.classList.toggle("clicked"),le(He,s=g,s)}function A(h){let g=null;l(4,y=Array.from(h).map(v=>{let I=v.offsetTop;return g!==null&&I<=g?v.adjustedOffsetTop=g+jt:v.adjustedOffsetTop=I,g=v.adjustedOffsetTop,v}))}let D=0;function V(h,g){var v,I,w,z,G,b;if(!t){let k=(v=h==null?void 0:h[D])==null?void 0:v.adjustedOffsetTop,U=(I=h==null?void 0:h[D+1])==null?void 0:I.adjustedOffsetTop,R=(w=h==null?void 0:h[D])==null?void 0:w.getAttribute("data-id"),$=(z=h==null?void 0:h[D+1])==null?void 0:z.getAttribute("data-id"),q=(G=document.querySelector(`.node[data-id="${R}"]`))==null?void 0:G.offsetTop,x=(b=document.querySelector(`.node[data-id="${$}"]`))==null?void 0:b.offsetTop,K=el(g,k,U),T=tl(K,q,x);g>U&&D++,g<k&&D!=0&&D--;const E=document.querySelector(".links:first-of-type");k&&U&&E&&K&&T&&(E==null||E.scrollTo({top:T}))}}return i.$$set=h=>{"data"in h&&l(0,n=h.data),"items"in h&&l(2,r=h.items),"scrollTopVal"in h&&l(3,a=h.scrollTopVal)},i.$$.update=()=>{i.$$.dirty&24&&V(y,a)},[n,_,r,a,y]}class sl extends Ie{constructor(e){super(),Ee(this,e,ll,Rt,we,{data:0,items:2,scrollTopVal:3})}}function $e(i,e,l){const t=i.slice();return t[27]=e[l],t}function il(i){let e,l=(i[0].title||"")+"",t;return{c(){e=L("div"),t=Q(l),this.h()},l(s){e=N(s,"DIV",{class:!0});var n=C(e);t=Z(n,l),n.forEach(m),this.h()},h(){p(e,"class","title svelte-x5b8hf")},m(s,n){P(s,e,n),M(e,t)},p(s,n){n&1&&l!==(l=(s[0].title||"")+"")&&_e(t,l)},d(s){s&&m(e)}}}function nl(i){let e,l,t,s,n,r=(i[0].title||"")+"",a,o,c;return{c(){e=L("img"),s=X(),n=L("div"),a=Q(r),this.h()},l(u){e=N(u,"IMG",{src:!0,alt:!0,class:!0}),s=H(u),n=N(u,"DIV",{class:!0});var f=C(n);a=Z(f,r),f.forEach(m),this.h()},h(){Ce(e.src,l=i[5])||p(e,"src",l),p(e,"alt",t=i[0].title),p(e,"class","svelte-x5b8hf"),p(n,"class","title svelte-x5b8hf")},m(u,f){P(u,e,f),P(u,s,f),P(u,n,f),M(n,a),o||(c=J(e,"load",i[11]),o=!0)},p(u,f){f&32&&!Ce(e.src,l=u[5])&&p(e,"src",l),f&1&&t!==(t=u[0].title)&&p(e,"alt",t),f&1&&r!==(r=(u[0].title||"")+"")&&_e(a,r)},d(u){u&&m(e),u&&m(s),u&&m(n),o=!1,c()}}}function rl(i){let e,l,t,s,n,r=i[0].title+"",a,o,c;return{c(){e=L("img"),s=X(),n=L("div"),a=Q(r),this.h()},l(u){e=N(u,"IMG",{src:!0,alt:!0,class:!0}),s=H(u),n=N(u,"DIV",{class:!0});var f=C(n);a=Z(f,r),f.forEach(m),this.h()},h(){Ce(e.src,l=i[0].img.replace("square","large"))||p(e,"src",l),p(e,"alt",t=i[0].title),p(e,"class","svelte-x5b8hf"),p(n,"class","title svelte-x5b8hf")},m(u,f){P(u,e,f),P(u,s,f),P(u,n,f),M(n,a),o||(c=J(e,"load",i[11]),o=!0)},p(u,f){f&1&&!Ce(e.src,l=u[0].img.replace("square","large"))&&p(e,"src",l),f&1&&t!==(t=u[0].title)&&p(e,"alt",t),f&1&&r!==(r=u[0].title+"")&&_e(a,r)},d(u){u&&m(e),u&&m(s),u&&m(n),o=!1,c()}}}function xe(i){let e,l=i[8].essays,t=[];for(let s=0;s<l.length;s+=1)t[s]=et($e(i,l,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=W()},l(s){for(let n=0;n<t.length;n+=1)t[n].l(s);e=W()},m(s,n){for(let r=0;r<t.length;r+=1)t[r].m(s,n);P(s,e,n)},p(s,n){if(n&256){l=s[8].essays;let r;for(r=0;r<l.length;r+=1){const a=$e(s,l,r);t[r]?t[r].p(a,n):(t[r]=et(a),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},d(s){Te(t,s),s&&m(e)}}}function et(i){let e,l,t,s=i[27].title+"",n,r;return{c(){e=L("a"),l=Q("→"),t=L("em"),n=Q(s),this.h()},l(a){e=N(a,"A",{class:!0,href:!0,target:!0,rel:!0});var o=C(e);l=Z(o,"→"),t=N(o,"EM",{});var c=C(t);n=Z(c,s),c.forEach(m),o.forEach(m),this.h()},h(){p(e,"class","link svelte-x5b8hf"),p(e,"href",r=i[27].url),p(e,"target","_blank"),p(e,"rel","noopener noreferrer")},m(a,o){P(a,e,o),M(e,l),M(e,t),M(t,n)},p(a,o){o&256&&s!==(s=a[27].title+"")&&_e(n,s),o&256&&r!==(r=a[27].url)&&p(e,"href",r)},d(a){a&&m(e)}}}function tt(i){let e;function l(n,r){return n[0].title==null||n[0].title.length==1?ol:al}let t=l(i),s=t(i);return{c(){s.c(),e=W()},l(n){s.l(n),e=W()},m(n,r){s.m(n,r),P(n,e,r)},p(n,r){t===(t=l(n))&&s?s.p(n,r):(s.d(1),s=t(n),s&&(s.c(),s.m(e.parentNode,e)))},d(n){s.d(n),n&&m(e)}}}function al(i){let e,l,t;return{c(){e=L("a"),l=Q("→ Metadata"),this.h()},l(s){e=N(s,"A",{class:!0,href:!0,target:!0,rel:!0});var n=C(e);l=Z(n,"→ Metadata"),n.forEach(m),this.h()},h(){p(e,"class","link svelte-x5b8hf"),p(e,"href",t=`${i[3]}/item/${i[4]}`),p(e,"target","_blank"),p(e,"rel","noopener noreferrer")},m(s,n){P(s,e,n),M(e,l)},p(s,n){n&24&&t!==(t=`${s[3]}/item/${s[4]}`)&&p(e,"href",t)},d(s){s&&m(e)}}}function ol(i){let e,l,t;return{c(){e=L("a"),l=Q("→ Metadata"),this.h()},l(s){e=N(s,"A",{class:!0,href:!0,target:!0,rel:!0});var n=C(e);l=Z(n,"→ Metadata"),n.forEach(m),this.h()},h(){p(e,"class","link svelte-x5b8hf"),p(e,"href",t=`${i[3]}/media/${i[4]}`),p(e,"target","_blank"),p(e,"rel","noopener noreferrer")},m(s,n){P(s,e,n),M(e,l)},p(s,n){n&24&&t!==(t=`${s[3]}/media/${s[4]}`)&&p(e,"href",t)},d(s){s&&m(e)}}}function fl(i){let e,l,t,s,n,r;function a(d,_){return d[0].img?rl:d[5]?nl:il}let o=a(i),c=o(i),u=i[8]!=null&&xe(i),f=i[3]&&tt(i);return{c(){e=L("div"),c.c(),l=X(),u&&u.c(),t=X(),f&&f.c(),this.h()},l(d){e=N(d,"DIV",{class:!0,title:!0,source:!0,target:!0,"data-id":!0});var _=C(e);c.l(_),l=H(_),u&&u.l(_),t=H(_),f&&f.l(_),_.forEach(m),this.h()},h(){p(e,"class","node svelte-x5b8hf"),p(e,"title",s=i[0].title),p(e,"source",i[9]),p(e,"target",i[4]),p(e,"data-id",i[4]),Ne(e,"selected",i[7]),Ne(e,"linkToEssay",i[8]!=null)},m(d,_){P(d,e,_),c.m(e,null),M(e,l),u&&u.m(e,null),M(e,t),f&&f.m(e,null),i[21](e),n||(r=[J(e,"mouseover",i[22]),J(e,"mouseleave",function(){Xe(i[13](i[4]))&&i[13](i[4]).apply(this,arguments)}),J(e,"click",i[18]),J(e,"keydown",i[19]),J(e,"focus",i[20])],n=!0)},p(d,[_]){i=d,o===(o=a(i))&&c?c.p(i,_):(c.d(1),c=o(i),c&&(c.c(),c.m(e,l))),i[8]!=null?u?u.p(i,_):(u=xe(i),u.c(),u.m(e,t)):u&&(u.d(1),u=null),i[3]?f?f.p(i,_):(f=tt(i),f.c(),f.m(e,null)):f&&(f.d(1),f=null),_&1&&s!==(s=i[0].title)&&p(e,"title",s),_&512&&p(e,"source",i[9]),_&16&&p(e,"target",i[4]),_&16&&p(e,"data-id",i[4]),_&128&&Ne(e,"selected",i[7]),_&256&&Ne(e,"linkToEssay",i[8]!=null)},i:Y,o:Y,d(d){d&&m(e),c.d(),u&&u.d(),f&&f.d(),i[21](null),n=!1,Se(r)}}}function ul(i,e,l){let t,s,n,r,a,o,c=Y,u=()=>(c(),c=Me(D,T=>l(17,o=T)),D),f,d=Y,_=()=>(d(),d=Me(V,T=>l(24,f=T)),V),y,S;se(i,de,T=>l(16,a=T)),se(i,He,T=>l(25,y=T)),se(i,Be,T=>l(10,S=T)),i.$$.on_destroy.push(()=>c()),i.$$.on_destroy.push(()=>d());let{datum:A}=e,{entities:D}=e;u();let{updatePosition:V}=e;_();let{essaysItems:h}=e,{site:g}=e,{openNode:v}=e,I,w=null;Tt(()=>{const T=A.source;T==`item_${y}`&&T!=w&&v(A,1),w=`item_${y}`}),Dt(()=>{le(V,f=!0,f)});function z(){le(V,f=!0,f)}function G(T){var j;const E=T.split("/"),O=o.find(ne=>ne["o:id"]==E.slice(-1)[0]);return(j=O==null?void 0:O.thumbnail_display_urls)==null?void 0:j.large}let b;function k(T){const E=T,O=document.querySelector(`.node-highlite[data-id="${E}"]`);O&&O.classList.add("hover"),b.classList.add("hover")}function U(T){const E=T,O=document.querySelector(`.node-highlite[data-id="${E}"]`);O&&O.classList.remove("hover"),b.classList.remove("hover")}function R(T){Ae.call(this,i,T)}function $(T){Ae.call(this,i,T)}function q(T){Ae.call(this,i,T)}function x(T){ye[T?"unshift":"push"](()=>{b=T,l(6,b)})}const K=()=>{le(Be,S=s,S),k(s)};return i.$$set=T=>{"datum"in T&&l(0,A=T.datum),"entities"in T&&u(l(1,D=T.entities)),"updatePosition"in T&&_(l(2,V=T.updatePosition)),"essaysItems"in T&&l(14,h=T.essaysItems),"site"in T&&l(3,g=T.site),"openNode"in T&&l(15,v=T.openNode)},i.$$.update=()=>{i.$$.dirty&131073&&o&&l(5,I=G(A.target)),i.$$.dirty&1&&l(9,t=A.source.split("/").slice(-1)[0]),i.$$.dirty&1&&l(4,s=A.target.split("/").slice(-1)[0]),i.$$.dirty&16400&&l(8,n=h.find(T=>T.id==s)),i.$$.dirty&65537&&l(7,r=a.some(T=>(T==null?void 0:T.id)==A.target))},[A,D,V,g,s,I,b,r,n,t,S,z,k,U,h,v,a,o,R,$,q,x,K]}class Lt extends Ie{constructor(e){super(),Ee(this,e,ul,fl,we,{datum:0,entities:1,updatePosition:2,essaysItems:14,site:3,openNode:15})}}var cl=0;function dl(){return++cl}var Je=Function("return this")();typeof Je.__nextId!="function"&&(Je.__nextId=dl);function Nt(){return"uid-"+Je.__nextId()}function _l(i){let e,l,t;return{c(){e=L("div"),this.h()},l(s){e=N(s,"DIV",{source:!0,target:!0}),C(e).forEach(m),this.h()},h(){p(e,"source",l=i[0].source.split("/").slice(-1)[0]),p(e,"target",t=i[0].target.split("/").slice(-1)[0])},m(s,n){P(s,e,n),i[8](e)},p(s,[n]){n&1&&l!==(l=s[0].source.split("/").slice(-1)[0])&&p(e,"source",l),n&1&&t!==(t=s[0].target.split("/").slice(-1)[0])&&p(e,"target",t)},i:Y,o:Y,d(s){s&&m(e),i[8](null)}}}let lt=0;function hl(i,e,l){let t,s,n,r,a=Y,o=()=>(a(),a=Me(_,h=>l(5,r=h)),_),c,u;se(i,qe,h=>l(12,n=h)),se(i,Oe,h=>l(6,c=h)),se(i,de,h=>l(7,u=h)),i.$$.on_destroy.push(()=>a());let{datum:f}=e,{label:d}=e,{updatePosition:_}=e;o();let y,S=Nt();function A(h,g=0,v){const I=h.split("/").slice(-1)[0],w=[...document.querySelectorAll(`.node[data-id="${I}"]`)],z=[];return w.forEach(G=>{const b=G.getBoundingClientRect(),k={x:b.x+c,y:b.y+g,width:b.width-g/2,height:b.height,selected:"selected"};z.push(k)}),z}function D(){delete n[S],le(_,r=!1,r);const h=A(f.source,lt),g=A(f.target,lt);y&&(y.getBoundingClientRect().x,y.getBoundingClientRect().y),h.forEach(v=>{g.forEach(I=>{let w=100;const z=v==null?void 0:v.selected;let G,b,k,U,R;G=v.x+v.width,b=v.y,k=I.x,U=I.y,I.x<v.x||I.x==v.x?R=I.x-w*5:I.x==v.x?R=I.x-w*3:R=I.x-w,f.source.includes("item_")&&(R=I.x-w);const $=G+w,q=b,x=I.y,K=`M${G},${b}C${$},${q} ${R},${x} ${k},${U}`;le(qe,n[S]=n[S]||[],n),n[S].push({class:s,d:K,label:d,selected:z,datum:{source:f.source.split("/").at(-1),target:f.target.split("/").at(-1)},reverse:f==null?void 0:f.reverse})})})}Dt(()=>{delete n[S],le(qe,n=[],n)});function V(h){ye[h?"unshift":"push"](()=>{y=h,l(2,y)})}return i.$$set=h=>{"datum"in h&&l(0,f=h.datum),"label"in h&&l(3,d=h.label),"updatePosition"in h&&o(l(1,_=h.updatePosition))},i.$$.update=()=>{i.$$.dirty&96&&D(),i.$$.dirty&128&&l(4,t=u.slice(-1)[0].id),i.$$.dirty&17&&(s=f.target==t||f.source==t?"highlite":"")},[f,_,y,d,t,r,c,u,V]}class zt extends Ie{constructor(e){super(),Ee(this,e,hl,_l,we,{datum:0,label:3,updatePosition:1})}}new TextEncoder;async function ml(i){const e=/<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)\1[^>]*?>(.*?)<\/a>/g,l=[],t=[],s=[],n=[];let r;for(;r=e.exec(i);)if(!r[2].includes("http")){const h=r[3],g=r[2];g.includes("item/")&&l.push(g.split("/")[1]),g.includes("set/")&&s.push(g.split("/")[1]),g.includes("media/")&&t.push(g.split("/")[1]),n.push({label:h,id:g.split("/")[1]})}const a=Wt,c=V(l,a).map(h=>{const g=`${ue}/items?${h.map(v=>`id[]=${v}`).join("&")}`;return fetch(g).then(v=>v.json())}),f=V(s,a).map(h=>{const g=`${ue}/item_sets?${h.map(v=>`id[]=${v}`).join("&")}`;return fetch(g).then(v=>v.json())}),_=V(t,a).map(h=>{const g=`${ue}/media?${h.map(v=>`id[]=${v}`).join("&")}`;return fetch(g).then(v=>v.json())}),y=await Promise.all(c),S=await Promise.all(f),A=await Promise.all(_),D=[...y.flat(),...A.flat(),...S.flat()];for(let h=0;h<D.length;h++){const g=n.find(I=>D[h]["o:id"]==I.id),v=D[h];g.uniqueId=Nt(),g.data=v}return n;function V(h,g){const v=[];for(let I=0;I<h.length;I+=g)v.push(h.slice(I,I+g));return v}}async function At(i){let e=[];for(let t=0;t<i.length;t++)if(i[t].data){let s=i[t].data,n=i[t].set||null,r=pl(s,n);e=[...e,...r]}return{...{nodes:e.reduce((t,s)=>(t.find(n=>n.id===s.source)||t.push({id:s.source,title:s.title}),t.find(n=>n.id===s.target)||t.push({id:s.target,title:s.title}),t),[]),links:e}}}function pl(i,e){var o;let l=[],t=`${ue}/resources/${i["o:id"]}`;e&&l.push({source:`${ue}/resources/${e.id}`,target:t,img:(o=i==null?void 0:i.thumbnail_display_urls)==null?void 0:o.large,title:i["o:title"]});let s,n=!1;const r=/\b[a-zA-Z]+\d+[a-zA-Z]*\s/;let a=async function(c){var u,f,d,_,y,S,A,D,V,h,g,v;for(let I in c)if(I==="@id"&&c[I].startsWith(ue)&&(c["o:title"]||c.display_title||n==!0)){let w=c[I].split("/").pop(),z=`${ue}/resources/${w}`;const G=c["o:title"]||c.display_title,b=(c==null?void 0:c.thumbnail_url)||((u=c==null?void 0:c.thumbnail_display_urls)==null?void 0:u.large),k=l.some($=>$.source===t&&$.target===z);let U=((d=(f=c.property_label)==null?void 0:f.replace("_"," "))==null?void 0:d.replace(r,""))||(s==null?void 0:s.replace(r,""));const R=Ut.map($=>$.props.includes(U)?$.key:"").find(Boolean);k||l.push({source:t,target:z,title:G,img:b,property:U,category:R,reverse:n})}else if(I==="@id"&&!c[I].startsWith(ue)&&c["o:label"]){let w=((y=(_=c.property_label)==null?void 0:_.replace("_"," "))==null?void 0:y.replace(r,""))||(s==null?void 0:s.replace(r,""));l.push({source:t,target:c[I],title:c["o:label"],property:w,category:"",external:!0,reverse:n})}else if(I==="@id"&&s=="media"&&t.split("/").pop()!=((S=c==null?void 0:c["o:primary_media"])==null?void 0:S["@id"].split("/").pop())){let w=((D=(A=c.property_label)==null?void 0:A.replace("_"," "))==null?void 0:D.replace(r,""))||(s==null?void 0:s.replace(r,"")),z=c[I].split("/").pop(),G=`${ue}/resources/${z}`;l.push({source:t,target:G,title:(c==null?void 0:c["o:label"])||" ",property:w,category:"",reverse:n})}else if(I==="@id"&&s=="item"){let w=((h=(V=c.property_label)==null?void 0:V.replace("_"," "))==null?void 0:h.replace(r,""))||(s==null?void 0:s.replace(r,"")),z=c[I].split("/").pop(),G=`${ue}/resources/${z}`;l.push({source:t,target:G,title:(c==null?void 0:c["o:label"])||" ",property:w,category:"",reverse:n})}else typeof c[I]=="object"&&(isNaN(I)&&(s=(v=(g=(I==null?void 0:I.split(":"))[1])==null?void 0:g.split("_"))==null?void 0:v.join(" "),I=="@reverse"&&(n=!0)),a(c[I]))};return a(i),l}function st(i,e,l){const t=i.slice();return t[22]=e[l],t}function it(i){let e,l;return{c(){e=L("div"),l=Q("Loading..."),this.h()},l(t){e=N(t,"DIV",{class:!0});var s=C(e);l=Z(s,"Loading..."),s.forEach(m),this.h()},h(){p(e,"class","loading svelte-1kyenid")},m(t,s){P(t,e,s),M(e,l)},d(t){t&&m(e)}}}function nt(i){let e,l,t=i[0],s=[];for(let r=0;r<t.length;r+=1)s[r]=at(st(i,t,r));const n=r=>F(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=W()},l(r){for(let a=0;a<s.length;a+=1)s[a].l(r);e=W()},m(r,a){for(let o=0;o<s.length;o+=1)s[o].m(r,a);P(r,e,a),l=!0},p(r,a){if(a&639){t=r[0];let o;for(o=0;o<t.length;o+=1){const c=st(r,t,o);s[o]?(s[o].p(c,a),B(s[o],1)):(s[o]=at(c),s[o].c(),B(s[o],1),s[o].m(e.parentNode,e))}for(oe(),o=t.length;o<s.length;o+=1)n(o);fe()}},i(r){if(!l){for(let a=0;a<t.length;a+=1)B(s[a]);l=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)F(s[a]);l=!1},d(r){Te(s,r),r&&m(e)}}}function gl(i){var t;let e,l;return e=new zt({props:{datum:i[22],updatePosition:i[3],label:((t=i[22])==null?void 0:t.property)||""}}),{c(){he(e.$$.fragment)},l(s){me(e.$$.fragment,s)},m(s,n){pe(e,s,n),l=!0},p(s,n){var a;const r={};n&1&&(r.datum=s[22]),n&8&&(r.updatePosition=s[3]),n&1&&(r.label=((a=s[22])==null?void 0:a.property)||""),e.$set(r)},i(s){l||(B(e.$$.fragment,s),l=!0)},o(s){F(e.$$.fragment,s),l=!1},d(s){ge(e,s)}}}function bl(i){let e,l,t=i[22].source!=i[22].target&&rt(i);return{c(){t&&t.c(),e=W()},l(s){t&&t.l(s),e=W()},m(s,n){t&&t.m(s,n),P(s,e,n),l=!0},p(s,n){s[22].source!=s[22].target?t?(t.p(s,n),n&1&&B(t,1)):(t=rt(s),t.c(),B(t,1),t.m(e.parentNode,e)):t&&(oe(),F(t,1,1,()=>{t=null}),fe())},i(s){l||(B(t),l=!0)},o(s){F(t),l=!1},d(s){t&&t.d(s),s&&m(e)}}}function rt(i){var c;let e,l,t,s,n;const r=[kl,vl],a=[];function o(u,f){var d;return(d=u[22])!=null&&d.external?1:0}return e=o(i),l=a[e]=r[e](i),s=new zt({props:{datum:i[22],updatePosition:i[3],label:((c=i[22])==null?void 0:c.property)||""}}),{c(){l.c(),t=X(),he(s.$$.fragment)},l(u){l.l(u),t=H(u),me(s.$$.fragment,u)},m(u,f){a[e].m(u,f),P(u,t,f),pe(s,u,f),n=!0},p(u,f){var y;let d=e;e=o(u),e===d?a[e].p(u,f):(oe(),F(a[d],1,1,()=>{a[d]=null}),fe(),l=a[e],l?l.p(u,f):(l=a[e]=r[e](u),l.c()),B(l,1),l.m(t.parentNode,t));const _={};f&1&&(_.datum=u[22]),f&8&&(_.updatePosition=u[3]),f&1&&(_.label=((y=u[22])==null?void 0:y.property)||""),s.$set(_)},i(u){n||(B(l),B(s.$$.fragment,u),n=!0)},o(u){F(l),F(s.$$.fragment,u),n=!1},d(u){a[e].d(u),u&&m(t),ge(s,u)}}}function vl(i){let e,l,t,s;return l=new Lt({props:{site:i[6],entities:i[2],updatePosition:i[3],datum:i[22],essaysItems:i[5],openNode:i[9]}}),{c(){e=L("a"),he(l.$$.fragment),this.h()},l(n){e=N(n,"A",{href:!0,target:!0,rel:!0});var r=C(e);me(l.$$.fragment,r),r.forEach(m),this.h()},h(){p(e,"href",t=i[22].target),p(e,"target","_blank"),p(e,"rel","noreferrer")},m(n,r){P(n,e,r),pe(l,e,null),s=!0},p(n,r){const a={};r&64&&(a.site=n[6]),r&4&&(a.entities=n[2]),r&8&&(a.updatePosition=n[3]),r&1&&(a.datum=n[22]),r&32&&(a.essaysItems=n[5]),l.$set(a),(!s||r&1&&t!==(t=n[22].target))&&p(e,"href",t)},i(n){s||(B(l.$$.fragment,n),s=!0)},o(n){F(l.$$.fragment,n),s=!1},d(n){n&&m(e),ge(l)}}}function kl(i){let e,l;function t(){return i[16](i[22])}function s(){return i[17](i[22])}return e=new Lt({props:{site:i[6],entities:i[2],updatePosition:i[3],datum:i[22],essaysItems:i[5],openNode:i[9]}}),e.$on("click",t),e.$on("keydown",s),{c(){he(e.$$.fragment)},l(n){me(e.$$.fragment,n)},m(n,r){pe(e,n,r),l=!0},p(n,r){i=n;const a={};r&64&&(a.site=i[6]),r&4&&(a.entities=i[2]),r&8&&(a.updatePosition=i[3]),r&1&&(a.datum=i[22]),r&32&&(a.essaysItems=i[5]),e.$set(a)},i(n){l||(B(e.$$.fragment,n),l=!0)},o(n){F(e.$$.fragment,n),l=!1},d(n){ge(e,n)}}}function at(i){let e,l,t,s,n;function r(...u){return i[15](i[22],...u)}const a=[bl,gl],o=[];function c(u,f){return f&3&&(e=null),e==null&&(e=!!u[1].some(r)),e?0:u[22].source&&u[22].target&&u[22].source!=u[22].target?1:-1}return~(l=c(i,-1))&&(t=o[l]=a[l](i)),{c(){t&&t.c(),s=W()},l(u){t&&t.l(u),s=W()},m(u,f){~l&&o[l].m(u,f),P(u,s,f),n=!0},p(u,f){i=u;let d=l;l=c(i,f),l===d?~l&&o[l].p(i,f):(t&&(oe(),F(o[d],1,1,()=>{o[d]=null}),fe()),~l?(t=o[l],t?t.p(i,f):(t=o[l]=a[l](i),t.c()),B(t,1),t.m(s.parentNode,s)):t=null)},i(u){n||(B(t),n=!0)},o(u){F(t),n=!1},d(u){~l&&o[l].d(u),u&&m(s)}}}function yl(i){let e,l,t,s=i[0]&&typeof i[0]=="object"&&Object.keys(i[0]).length>0,n,r=i[8]&&it(),a=s&&nt(i);return{c(){e=L("section"),r&&r.c(),l=X(),t=L("div"),a&&a.c()},l(o){e=N(o,"SECTION",{});var c=C(e);r&&r.l(c),l=H(c),t=N(c,"DIV",{});var u=C(t);a&&a.l(u),u.forEach(m),c.forEach(m)},m(o,c){P(o,e,c),r&&r.m(e,null),M(e,l),M(e,t),a&&a.m(t,null),i[18](e),n=!0},p(o,[c]){o[8]?r||(r=it(),r.c(),r.m(e,l)):r&&(r.d(1),r=null),c&1&&(s=o[0]&&typeof o[0]=="object"&&Object.keys(o[0]).length>0),s?a?(a.p(o,c),c&1&&B(a,1)):(a=nt(o),a.c(),B(a,1),a.m(t,null)):a&&(oe(),F(a,1,1,()=>{a=null}),fe())},i(o){n||(B(a),n=!0)},o(o){F(a),n=!1},d(o){o&&m(e),r&&r.d(),a&&a.d(),i[18](null)}}}function Il(i){let e=document.querySelector(`#col_${i}`);e&&e.scrollTo({top:0,behavior:"smooth"})}function El(i,e){return e.filter(l=>!i.some(t=>t.target===l.target||t.id===l.target))}function wl(i,e,l){let t,s=Y,n=()=>(s(),s=Me(d,k=>l(20,t=k)),d),r;se(i,de,k=>l(21,r=k)),i.$$.on_destroy.push(()=>s());let{category:a}=e,{data:o}=e,{newData:c}=e,{dataLen:u}=e,{entities:f}=e,{updatePosition:d}=e;n();let{index:_}=e,{loadData:y}=e,{defaultNodes:S}=e,{batchSize:A}=e,{essaysItems:D}=e,{site:V}=e,h,g,v={nodes:[],links:[]};async function I(k,U){Il(U),l(8,g=!0),r.splice(U,r.length-U);let R=r.map(E=>E.data).flat();const q=await(await fetch(k.target)).json();if(q!=null&&q["o:items"]&&r.length==1){let E=[];const O=q["o:items"]["@id"];(await(await fetch(O)).json()).forEach(ie=>{E.push(ie)});let ee=E.map(ie=>({"o:title":ie["o:title"],"@id":ie["@id"],thumbnail_display_urls:ie.thumbnail_display_urls}));q.related={...ee}}v=await At([{data:q}]);let x=v.links.filter(E=>E.source===k.target||E.target===k.target),K=El([...S,...R],x),T=x.slice(0,A);le(de,r[U]={id:k.target,data:x.sort((E,O)=>{if(E.property)return E.property.localeCompare(O.property)}),page:0,new:K,paginate:T},r),l(8,g=!1),K.length>0&&y(T,A),le(d,t=!0,t)}const w=(k,U)=>(U==null?void 0:U.title)===k.title,z=k=>{I(k,_+1)},G=k=>{I(k,_+1)};function b(k){ye[k?"unshift":"push"](()=>{h=k,l(7,h)})}return i.$$set=k=>{"category"in k&&l(10,a=k.category),"data"in k&&l(0,o=k.data),"newData"in k&&l(1,c=k.newData),"dataLen"in k&&l(11,u=k.dataLen),"entities"in k&&l(2,f=k.entities),"updatePosition"in k&&n(l(3,d=k.updatePosition)),"index"in k&&l(4,_=k.index),"loadData"in k&&l(12,y=k.loadData),"defaultNodes"in k&&l(13,S=k.defaultNodes),"batchSize"in k&&l(14,A=k.batchSize),"essaysItems"in k&&l(5,D=k.essaysItems),"site"in k&&l(6,V=k.site)},[o,c,f,d,_,D,V,h,g,I,a,u,y,S,A,w,z,G,b]}class qt extends Ie{constructor(e){super(),Ee(this,e,wl,yl,we,{category:10,data:0,newData:1,dataLen:11,entities:2,updatePosition:3,index:4,loadData:12,defaultNodes:13,batchSize:14,essaysItems:5,site:6})}}function ot(i,e,l){const t=i.slice();return t[32]=e[l],t[34]=l,t}function We(i){const e=i.slice(),l=e[32].paginate.filter(s=>!e[3].mainCategories.some(n=>n.props.includes(s.property)));e[35]=l;const t=e[32].data.filter(s=>!e[3].mainCategories.some(n=>n.props.includes(s.property))).length;return e[36]=t,e}function ft(i,e,l){const t=i.slice();t[37]=e[l];const s=t[32].paginate.filter(function(...a){return i[20](t[37],...a)});t[38]=s;const n=t[32].data.filter(function(...a){return i[21](t[37],...a)}).length;return t[36]=n,t}function Pl(i){let e,l,t=i[5],s=[];for(let r=0;r<t.length;r+=1)s[r]=mt(ot(i,t,r));const n=r=>F(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=W()},l(r){for(let a=0;a<s.length;a+=1)s[a].l(r);e=W()},m(r,a){for(let o=0;o<s.length;o+=1)s[o].m(r,a);P(r,e,a),l=!0},p(r,a){if(a[0]&16063){t=r[5];let o;for(o=0;o<t.length;o+=1){const c=ot(r,t,o);s[o]?(s[o].p(c,a),B(s[o],1)):(s[o]=mt(c),s[o].c(),B(s[o],1),s[o].m(e.parentNode,e))}for(oe(),o=t.length;o<s.length;o+=1)n(o);fe()}},i(r){if(!l){for(let a=0;a<t.length;a+=1)B(s[a]);l=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)F(s[a]);l=!1},d(r){Te(s,r),r&&m(e)}}}function Sl(i){let e,l,t;return{c(){e=L("div"),l=L("h4"),t=Q("Loading Graph..."),this.h()},l(s){e=N(s,"DIV",{});var n=C(e);l=N(n,"H4",{class:!0});var r=C(l);t=Z(r,"Loading Graph..."),r.forEach(m),n.forEach(m),this.h()},h(){p(l,"class","loading svelte-d0zru6")},m(s,n){P(s,e,n),M(e,l),M(l,t)},p:Y,i:Y,o:Y,d(s){s&&m(e)}}}function Tl(i){let e,l;return{c(){e=L("div"),l=Q("There are no connections."),this.h()},l(t){e=N(t,"DIV",{class:!0});var s=C(e);l=Z(s,"There are no connections."),s.forEach(m),this.h()},h(){p(e,"class","no-items svelte-d0zru6")},m(t,s){P(t,e,s),M(e,l)},p:Y,i:Y,o:Y,d(t){t&&m(e)}}}function Dl(i){let e,l,t=i[32].paginate.filter(i[19]).length>0,s,n,r=i[3].mainCategories,a=[];for(let f=0;f<r.length;f+=1)a[f]=ct(ft(i,r,f));const o=f=>F(a[f],1,1,()=>{a[f]=null});let c=t&&dt(We(i)),u=i[32].paginate.length<i[32].new.length&&ht(i);return{c(){e=L("div");for(let f=0;f<a.length;f+=1)a[f].c();l=X(),c&&c.c(),s=X(),u&&u.c()},l(f){e=N(f,"DIV",{});var d=C(e);for(let _=0;_<a.length;_+=1)a[_].l(d);l=H(d),c&&c.l(d),s=H(d),u&&u.l(d),d.forEach(m)},m(f,d){P(f,e,d);for(let _=0;_<a.length;_+=1)a[_].m(e,null);M(e,l),c&&c.m(e,null),M(e,s),u&&u.m(e,null),n=!0},p(f,d){if(d[0]&7725){r=f[3].mainCategories;let _;for(_=0;_<r.length;_+=1){const y=ft(f,r,_);a[_]?(a[_].p(y,d),B(a[_],1)):(a[_]=ct(y),a[_].c(),B(a[_],1),a[_].m(e,l))}for(oe(),_=r.length;_<a.length;_+=1)o(_);fe()}d[0]&40&&(t=f[32].paginate.filter(f[19]).length>0),t?c?(c.p(We(f),d),d[0]&40&&B(c,1)):(c=dt(We(f)),c.c(),B(c,1),c.m(e,s)):c&&(oe(),F(c,1,1,()=>{c=null}),fe()),f[32].paginate.length<f[32].new.length?u?u.p(f,d):(u=ht(f),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i(f){if(!n){for(let d=0;d<r.length;d+=1)B(a[d]);B(c),n=!0}},o(f){a=a.filter(Boolean);for(let d=0;d<a.length;d+=1)F(a[d]);F(c),n=!1},d(f){f&&m(e),Te(a,f),c&&c.d(),u&&u.d()}}}function ut(i){let e,l;return e=new qt({props:{site:i[3].publicSite,essaysItems:i[2],category:i[37].key,data:i[38],newData:i[32].new,dataLen:i[36],index:i[34],entities:i[9],updatePosition:i[0],batchSize:i[10],defaultNodes:[...i[11]],loadData:i[12]}}),{c(){he(e.$$.fragment)},l(t){me(e.$$.fragment,t)},m(t,s){pe(e,t,s),l=!0},p(t,s){const n={};s[0]&8&&(n.site=t[3].publicSite),s[0]&4&&(n.essaysItems=t[2]),s[0]&8&&(n.category=t[37].key),s[0]&40&&(n.data=t[38]),s[0]&32&&(n.newData=t[32].new),s[0]&40&&(n.dataLen=t[36]),s[0]&1&&(n.updatePosition=t[0]),e.$set(n)},i(t){l||(B(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){ge(e,t)}}}function ct(i){let e,l,t=i[38].length>0&&ut(i);return{c(){t&&t.c(),e=W()},l(s){t&&t.l(s),e=W()},m(s,n){t&&t.m(s,n),P(s,e,n),l=!0},p(s,n){s[38].length>0?t?(t.p(s,n),n[0]&40&&B(t,1)):(t=ut(s),t.c(),B(t,1),t.m(e.parentNode,e)):t&&(oe(),F(t,1,1,()=>{t=null}),fe())},i(s){l||(B(t),l=!0)},o(s){F(t),l=!1},d(s){t&&t.d(s),s&&m(e)}}}function dt(i){let e,l,t=i[35].length>0&&_t(i);return{c(){t&&t.c(),e=W()},l(s){t&&t.l(s),e=W()},m(s,n){t&&t.m(s,n),P(s,e,n),l=!0},p(s,n){s[35].length>0?t?(t.p(s,n),n[0]&40&&B(t,1)):(t=_t(s),t.c(),B(t,1),t.m(e.parentNode,e)):t&&(oe(),F(t,1,1,()=>{t=null}),fe())},i(s){l||(B(t),l=!0)},o(s){F(t),l=!1},d(s){t&&t.d(s),s&&m(e)}}}function _t(i){let e,l;return e=new qt({props:{site:i[3].publicSite,essaysItems:i[2],category:"",data:i[35],newData:i[32].new,dataLen:i[36],index:i[34],entities:i[9],updatePosition:i[0],batchSize:i[10],defaultNodes:[...i[11]],loadData:i[12]}}),{c(){he(e.$$.fragment)},l(t){me(e.$$.fragment,t)},m(t,s){pe(e,t,s),l=!0},p(t,s){const n={};s[0]&8&&(n.site=t[3].publicSite),s[0]&4&&(n.essaysItems=t[2]),s[0]&40&&(n.data=t[35]),s[0]&32&&(n.newData=t[32].new),s[0]&40&&(n.dataLen=t[36]),s[0]&1&&(n.updatePosition=t[0]),e.$set(n)},i(t){l||(B(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){ge(e,t)}}}function ht(i){let e,l,t,s;return{c(){e=L("div"),l=Q("Load more"),this.h()},l(n){e=N(n,"DIV",{class:!0});var r=C(e);l=Z(r,"Load more"),r.forEach(m),this.h()},h(){p(e,"class","more svelte-d0zru6")},m(n,r){P(n,e,r),M(e,l),t||(s=[J(e,"click",function(){Xe(i[13](i[34],i[7]))&&i[13](i[34],i[7]).apply(this,arguments)}),J(e,"keydown",function(){Xe(i[13](i[34],i[7]))&&i[13](i[34],i[7]).apply(this,arguments)})],t=!0)},p(n,r){i=n},d(n){n&&m(e),t=!1,Se(s)}}}function mt(i){let e,l,t,s,n,r,a;const o=[Dl,Tl],c=[];function u(f,d){var _,y;return(_=f[32])!=null&&_.new&&((y=f[32])==null?void 0:y.new.length)>0?0:1}return l=u(i),t=c[l]=o[l](i),{c(){e=L("div"),t.c(),s=X(),this.h()},l(f){e=N(f,"DIV",{class:!0,id:!0});var d=C(e);t.l(d),s=H(d),d.forEach(m),this.h()},h(){p(e,"class","links svelte-d0zru6"),p(e,"id","col_"+i[34])},m(f,d){P(f,e,d),c[l].m(e,null),M(e,s),i[22](e),n=!0,r||(a=[J(e,"scroll",i[23]),J(e,"click",i[24]),J(e,"keypress",i[25])],r=!0)},p(f,d){let _=l;l=u(f),l===_?c[l].p(f,d):(oe(),F(c[_],1,1,()=>{c[_]=null}),fe(),t=c[l],t?t.p(f,d):(t=c[l]=o[l](f),t.c()),B(t,1),t.m(e,s))},i(f){n||(B(t),n=!0)},o(f){F(t),n=!1},d(f){f&&m(e),c[l].d(),i[22](null),r=!1,Se(a)}}}function pt(i){let e,l,t,s;return{c(){e=L("div"),l=Q("✕"),this.h()},l(n){e=N(n,"DIV",{class:!0});var r=C(e);l=Z(r,"✕"),r.forEach(m),this.h()},h(){p(e,"class","close svelte-d0zru6")},m(n,r){P(n,e,r),M(e,l),t||(s=[J(e,"click",i[27]),J(e,"keypress",i[28])],t=!0)},p:Y,d(n){n&&m(e),t=!1,Se(s)}}}function Ll(i){let e,l,t,s,n,r;const a=[Sl,Pl],o=[];function c(f,d){return f[8].length==0?0:1}l=c(i),t=o[l]=a[l](i);let u=i[5].length>1&&pt(i);return{c(){e=L("div"),t.c(),s=X(),u&&u.c(),n=W(),this.h()},l(f){e=N(f,"DIV",{class:!0});var d=C(e);t.l(d),d.forEach(m),s=H(f),u&&u.l(f),n=W(),this.h()},h(){p(e,"class","graph svelte-d0zru6")},m(f,d){P(f,e,d),o[l].m(e,null),i[26](e),P(f,s,d),u&&u.m(f,d),P(f,n,d),r=!0},p(f,d){let _=l;l=c(f),l===_?o[l].p(f,d):(oe(),F(o[_],1,1,()=>{o[_]=null}),fe(),t=o[l],t?t.p(f,d):(t=o[l]=a[l](f),t.c()),B(t,1),t.m(e,null)),f[5].length>1?u?u.p(f,d):(u=pt(f),u.c(),u.m(n.parentNode,n)):u&&(u.d(1),u=null)},i(f){r||(B(t),r=!0)},o(f){F(t),r=!1},d(f){f&&m(e),o[l].d(),i[26](null),f&&m(s),u&&u.d(f),f&&m(n)}}}function Nl(i,e,l){const t=l-e;return(i-e)/t*100}function zl(i,e,l){const t=l-e;return e+t*i/100}function Al(i,e,l){let t,s,n,r;se(i,Pe,E=>l(30,s=E)),se(i,de,E=>l(5,n=E));let{updatePosition:a}=e,{handlePosition:o}=e,{data:c}=e,{visibleItemsID:u}=e,{essaysItems:f}=e,{config:d}=e,{items:_}=e,{screenSize:y}=e,S;const A=be([]);se(i,A,E=>l(8,r=E));let D=d.batch,V,h=c.nodes.filter(E=>u.includes(E.id));Ye(async()=>{g(c.nodes,D)}),Tt(()=>{V.lastElementChild&&y>600&&V.lastElementChild.scrollIntoView({behavior:"smooth",block:"end"}),o()});async function g(E,O){const j=E.map(ee=>{var re,te;return(((re=ee==null?void 0:ee.id)==null?void 0:re.split("/"))||((te=ee==null?void 0:ee.target)==null?void 0:te.split("/"))).slice(-1)[0]}),ne=Math.ceil(j.length/O);for(let ee=0;ee<ne;ee++){const ie=j.slice(ee*O,(ee+1)*O);let re=`${d.api}/items?${ie.map(ae=>`id[]=${ae}`).join("&")}`,te=await fetch(re),ce=await te.json();A.update(ae=>(ae.includes(...ce)||ae.push(...ce),ae)),ce.length!=ie.length&&(re=`${d.api}/media?${ie.map(ae=>`id[]=${ae}`).join("&")}`,te=await fetch(re),ce=await te.json(),A.update(ae=>(ae.includes(...ce)||ae.push(...ce),ae)))}}let v;const I=(E,O)=>{var j,ne,ee,ie,re;if(O!=null){const te=((j=n[E])==null?void 0:j.page)+1||0;le(de,n[E]={...n[E],page:te,paginate:(ne=n[E])==null?void 0:ne.data.slice(0,te*D)},n),(ee=n[E])!=null&&ee.data&&((ie=n[E])==null?void 0:ie.paginate.length)!=((re=n[E])==null?void 0:re.data.length)&&g(n[E].paginate.slice(-D),D)}};let w=0;function z(E){var O,j,ne,ee,ie,re;if(s){const te=document.querySelectorAll(".links:first-of-type .node");let ce=(O=te==null?void 0:te[w])==null?void 0:O.offsetTop,ae=(j=te==null?void 0:te[w])==null?void 0:j.getAttribute("data-id"),Fe=(ne=te==null?void 0:te[w+1])==null?void 0:ne.offsetTop,Ot=(ee=te==null?void 0:te[w+1])==null?void 0:ee.getAttribute("data-id"),Mt=(ie=document.querySelector(`.node-highlite[data-id="${ae}"]`))==null?void 0:ie.offsetTop,Ct=(re=document.querySelector(`.node-highlite[data-id="${Ot}"]`))==null?void 0:re.offsetTop,Vt=Nl(E,ce,Fe),Ge=zl(Vt,Mt,Ct);const De=document.querySelector(".markdown__container");E>Fe&&w++,E<ce&&w!=0&&w--,De&&Ge&&ce!==Fe&&Ge>0&&(De==null||De.scrollTo({top:Ge}))}}const G=E=>!d.mainCategories.some(O=>O.props.includes(E.property)),b=(E,O)=>E.props.includes(O.property),k=(E,O)=>E.props.includes(O.property);function U(E){ye[E?"unshift":"push"](()=>{v=E,l(7,v)})}const R=()=>{let E=document.querySelector("#col_0");E.addEventListener("scroll",O=>{l(4,S=E==null?void 0:E.scrollTop)}),o()},$=()=>{o()},q=()=>{o()};function x(E){ye[E?"unshift":"push"](()=>{V=E,l(6,V)})}const K=()=>{le(de,n=[],n),o()},T=()=>{le(de,n=[],n)};return i.$$set=E=>{"updatePosition"in E&&l(0,a=E.updatePosition),"handlePosition"in E&&l(1,o=E.handlePosition),"data"in E&&l(14,c=E.data),"visibleItemsID"in E&&l(15,u=E.visibleItemsID),"essaysItems"in E&&l(2,f=E.essaysItems),"config"in E&&l(3,d=E.config),"items"in E&&l(16,_=E.items),"screenSize"in E&&l(17,y=E.screenSize)},i.$$.update=()=>{var E;i.$$.dirty[0]&65544&&l(18,t=_.filter(O=>O==null?void 0:O.data).map(O=>{var j,ne;return{img:(j=O.data)==null?void 0:j.thumbnail_display_urls.large,source:`item_${O.id}`,target:`${d.api}/resources/${O.id}`,title:((ne=O.data)==null?void 0:ne["o:title"])||""}})),i.$$.dirty[0]&262176&&(n&&n.length==0||de&&((E=n==null?void 0:n[0])==null?void 0:E.data.length)==0)&&le(de,n[0]={data:t,new:t,page:0,paginate:t},n),i.$$.dirty[0]&16&&z(S)},[a,o,f,d,S,n,V,v,r,A,D,h,g,I,c,u,_,y,t,G,b,k,U,R,$,q,x,K,T]}class ql extends Ie{constructor(e){super(),Ee(this,e,Al,Ll,we,{updatePosition:0,handlePosition:1,data:14,visibleItemsID:15,essaysItems:2,config:3,items:16,screenSize:17},null,[-1,-1])}}function gt(i,e,l){const t=i.slice();return t[2]=e[l][0],t[3]=e[l][1],t}function bt(i,e,l){const t=i.slice();return t[6]=e[l],t}function vt(i){let e,l,t=Object.entries(i[0]),s=[];for(let n=0;n<t.length;n+=1)s[n]=St(gt(i,t,n));return{c(){e=ve("svg"),l=ve("g");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=ke(n,"svg",{class:!0});var r=C(e);l=ke(r,"g",{});var a=C(l);for(let o=0;o<s.length;o+=1)s[o].l(a);a.forEach(m),r.forEach(m),this.h()},h(){p(e,"class","svelte-1ddz0y9")},m(n,r){P(n,e,r),M(e,l);for(let a=0;a<s.length;a+=1)s[a].m(l,null)},p(n,r){if(r&3){t=Object.entries(n[0]);let a;for(a=0;a<t.length;a+=1){const o=gt(n,t,a);s[a]?s[a].p(o,r):(s[a]=St(o),s[a].c(),s[a].m(l,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=t.length}},d(n){n&&m(e),Te(s,n)}}}function kt(i){let e,l,t=i[6].label+"",s,n,r,a,o,c,u,f,d=i[6].label+"",_,y,S,A,D,V,h=i[6].reverse&&i[6].label&&yt(),g=!i[6].reverse&&i[6].label&&It(),v=i[6].reverse&&i[6].label&&Et(),I=!i[6].reverse&&i[6].label&&wt();return{c(){e=ve("text"),l=ve("textPath"),s=Q(t),h&&h.c(),n=W(),g&&g.c(),u=ve("text"),f=ve("textPath"),_=Q(d),v&&v.c(),y=W(),I&&I.c(),this.h()},l(w){e=ke(w,"text",{class:!0,source:!0,target:!0});var z=C(e);l=ke(z,"textPath",{"alignment-baseline":!0,href:!0,startOffset:!0,"text-anchor":!0});var G=C(l);s=Z(G,t),h&&h.l(G),n=W(),g&&g.l(G),G.forEach(m),z.forEach(m),u=ke(w,"text",{class:!0,source:!0,target:!0});var b=C(u);f=ke(b,"textPath",{"alignment-baseline":!0,href:!0,startOffset:!0,"text-anchor":!0});var k=C(f);_=Z(k,d),v&&v.l(k),y=W(),I&&I.l(k),k.forEach(m),b.forEach(m),this.h()},h(){p(l,"alignment-baseline","middle"),p(l,"href",r="#path_"+i[2]),p(l,"startOffset","99%"),p(l,"text-anchor","end"),p(e,"class",a="background "+i[6].class+" svelte-1ddz0y9"),p(e,"source",o=i[6].datum.source),p(e,"target",c=i[6].datum.target),p(f,"alignment-baseline","middle"),p(f,"href",S="#path_"+i[2]),p(f,"startOffset","99%"),p(f,"text-anchor","end"),p(u,"class",A=Ve(i[6].class)+" svelte-1ddz0y9"),p(u,"source",D=i[6].datum.source),p(u,"target",V=i[6].datum.target)},m(w,z){P(w,e,z),M(e,l),M(l,s),h&&h.m(l,null),M(l,n),g&&g.m(l,null),P(w,u,z),M(u,f),M(f,_),v&&v.m(f,null),M(f,y),I&&I.m(f,null)},p(w,z){z&1&&t!==(t=w[6].label+"")&&_e(s,t),w[6].reverse&&w[6].label?h||(h=yt(),h.c(),h.m(l,n)):h&&(h.d(1),h=null),!w[6].reverse&&w[6].label?g||(g=It(),g.c(),g.m(l,null)):g&&(g.d(1),g=null),z&1&&r!==(r="#path_"+w[2])&&p(l,"href",r),z&1&&a!==(a="background "+w[6].class+" svelte-1ddz0y9")&&p(e,"class",a),z&1&&o!==(o=w[6].datum.source)&&p(e,"source",o),z&1&&c!==(c=w[6].datum.target)&&p(e,"target",c),z&1&&d!==(d=w[6].label+"")&&_e(_,d),w[6].reverse&&w[6].label?v||(v=Et(),v.c(),v.m(f,y)):v&&(v.d(1),v=null),!w[6].reverse&&w[6].label?I||(I=wt(),I.c(),I.m(f,null)):I&&(I.d(1),I=null),z&1&&S!==(S="#path_"+w[2])&&p(f,"href",S),z&1&&A!==(A=Ve(w[6].class)+" svelte-1ddz0y9")&&p(u,"class",A),z&1&&D!==(D=w[6].datum.source)&&p(u,"source",D),z&1&&V!==(V=w[6].datum.target)&&p(u,"target",V)},d(w){w&&m(e),h&&h.d(),g&&g.d(),w&&m(u),v&&v.d(),I&&I.d()}}}function yt(i){let e;return{c(){e=Q(" -")},l(l){e=Z(l," -")},m(l,t){P(l,e,t)},d(l){l&&m(e)}}}function It(i){let e;return{c(){e=Q("→")},l(l){e=Z(l,"→")},m(l,t){P(l,e,t)},d(l){l&&m(e)}}}function Et(i){let e;return{c(){e=Q("←")},l(l){e=Z(l,"←")},m(l,t){P(l,e,t)},d(l){l&&m(e)}}}function wt(i){let e;return{c(){e=Q("→")},l(l){e=Z(l,"→")},m(l,t){P(l,e,t)},d(l){l&&m(e)}}}function Pt(i){let e,l,t,s,n,r,a=(i[1]==i[6].datum.source&&i[6].selected!="not-selected"||i[1]==i[6].datum.target)&&kt(i);return{c(){e=ve("path"),a&&a.c(),r=W(),this.h()},l(o){e=ke(o,"path",{id:!0,class:!0,"data-attr":!0,d:!0}),C(e).forEach(m),a&&a.l(o),r=W(),this.h()},h(){p(e,"id",l="path_"+i[2]),p(e,"class",t=Ve(i[6].class)+" svelte-1ddz0y9"),p(e,"data-attr",s=i[6].selected),p(e,"d",n=i[6].d)},m(o,c){P(o,e,c),a&&a.m(o,c),P(o,r,c)},p(o,c){c&1&&l!==(l="path_"+o[2])&&p(e,"id",l),c&1&&t!==(t=Ve(o[6].class)+" svelte-1ddz0y9")&&p(e,"class",t),c&1&&s!==(s=o[6].selected)&&p(e,"data-attr",s),c&1&&n!==(n=o[6].d)&&p(e,"d",n),o[1]==o[6].datum.source&&o[6].selected!="not-selected"||o[1]==o[6].datum.target?a?a.p(o,c):(a=kt(o),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},d(o){o&&m(e),a&&a.d(o),o&&m(r)}}}function St(i){let e,l=i[3],t=[];for(let s=0;s<l.length;s+=1)t[s]=Pt(bt(i,l,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=W()},l(s){for(let n=0;n<t.length;n+=1)t[n].l(s);e=W()},m(s,n){for(let r=0;r<t.length;r+=1)t[r].m(s,n);P(s,e,n)},p(s,n){if(n&3){l=s[3];let r;for(r=0;r<l.length;r+=1){const a=bt(s,l,r);t[r]?t[r].p(a,n):(t[r]=Pt(a),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},d(s){Te(t,s),s&&m(e)}}}function Ol(i){let e=Object.keys(i[0]).length>0,l,t=e&&vt(i);return{c(){t&&t.c(),l=W()},l(s){t&&t.l(s),l=W()},m(s,n){t&&t.m(s,n),P(s,l,n)},p(s,[n]){n&1&&(e=Object.keys(s[0]).length>0),e?t?t.p(s,n):(t=vt(s),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},i:Y,o:Y,d(s){t&&t.d(s),s&&m(l)}}}function Ml(i,e,l){let t,s;return se(i,qe,n=>l(0,t=n)),se(i,Be,n=>l(1,s=n)),[t,s]}class Cl extends Ie{constructor(e){super(),Ee(this,e,Ml,Ol,we,{})}}function Vl(i){let e,l,t,s,n,r,a,o,c,u,f;return t=new sl({props:{data:i[12],items:i[3],scrollTopVal:i[7]}}),r=new ql({props:{items:i[3],data:i[9],screenSize:i[0],essaysItems:i[5],visibleItemsID:i[4],handlePosition:i[14],updatePosition:i[13],config:Xt}}),o=new Cl({}),{c(){e=L("article"),l=L("section"),he(t.$$.fragment),s=X(),n=L("section"),he(r.$$.fragment),a=X(),he(o.$$.fragment),this.h()},l(d){e=N(d,"ARTICLE",{style:!0,class:!0});var _=C(e);l=N(_,"SECTION",{class:!0});var y=C(l);me(t.$$.fragment,y),y.forEach(m),s=H(_),n=N(_,"SECTION",{class:!0});var S=C(n);me(r.$$.fragment,S),S.forEach(m),a=H(_),me(o.$$.fragment,_),_.forEach(m),this.h()},h(){var d;p(l,"class","markdown__container svelte-15zdm0q"),p(n,"class","graph__container svelte-15zdm0q"),Gt(e,"--theme-color",((d=i[12].meta)==null?void 0:d.color)||"blue"),p(e,"class","svelte-15zdm0q")},m(d,_){P(d,e,_),M(e,l),pe(t,l,null),i[19](l),M(e,s),M(e,n),pe(r,n,null),M(e,a),pe(o,e,null),i[26](e),c=!0,u||(f=[J(l,"wheel",i[20],{passive:!0}),J(l,"scroll",i[21]),J(n,"wheel",i[22],{passive:!0}),J(e,"resize",i[14]),J(e,"scroll",i[23]),J(e,"touchmove",i[24],{passive:!0}),J(e,"click",i[25]),J(e,"keypress",i[17])],u=!0)},p(d,_){const y={};_&8&&(y.items=d[3]),_&128&&(y.scrollTopVal=d[7]),t.$set(y);const S={};_&8&&(S.items=d[3]),_&512&&(S.data=d[9]),_&1&&(S.screenSize=d[0]),_&32&&(S.essaysItems=d[5]),_&16&&(S.visibleItemsID=d[4]),r.$set(S)},i(d){c||(B(t.$$.fragment,d),B(r.$$.fragment,d),B(o.$$.fragment,d),c=!0)},o(d){F(t.$$.fragment,d),F(r.$$.fragment,d),F(o.$$.fragment,d),c=!1},d(d){d&&m(e),ge(t),i[19](null),ge(r),ge(o),i[26](null),u=!1,Se(f)}}}function Bl(i){let e,l,t,s;return{c(){e=L("article"),l=L("section"),t=L("h4"),s=Q("Loading..."),this.h()},l(n){e=N(n,"ARTICLE",{class:!0});var r=C(e);l=N(r,"SECTION",{class:!0});var a=C(l);t=N(a,"H4",{});var o=C(t);s=Z(o,"Loading..."),o.forEach(m),a.forEach(m),r.forEach(m),this.h()},h(){p(l,"class","short_text svelte-15zdm0q"),p(e,"class","svelte-15zdm0q")},m(n,r){P(n,e,r),M(e,l),M(l,t),M(t,s)},p:Y,i:Y,o:Y,d(n){n&&m(e)}}}function Fl(i){let e,l,t,s;return{c(){e=L("article"),l=L("section"),t=L("h4"),s=Q("404 Page not found"),this.h()},l(n){e=N(n,"ARTICLE",{class:!0});var r=C(e);l=N(r,"SECTION",{class:!0});var a=C(l);t=N(a,"H4",{});var o=C(t);s=Z(o,"404 Page not found"),o.forEach(m),a.forEach(m),r.forEach(m),this.h()},h(){p(l,"class","short_text svelte-15zdm0q"),p(e,"class","svelte-15zdm0q")},m(n,r){P(n,e,r),M(e,l),M(l,t),M(t,s)},p:Y,i:Y,o:Y,d(n){n&&m(e)}}}function Gl(i){var z,G;let e,l,t,s,n,r,a,o,c,u,f,d,_,y,S,A,D,V,h,g,v,I,w;return document.title=e=((G=(z=i[12])==null?void 0:z.meta)==null?void 0:G.title)||ze,{c(){l=X(),t=L("meta"),s=X(),n=L("meta"),a=X(),o=L("meta"),c=X(),u=L("meta"),f=X(),d=L("meta"),_=X(),y=L("meta"),S=X(),A=L("meta"),V=X(),h=L("meta"),g=X(),v=L("meta"),I=X(),w=L("meta"),this.h()},l(b){l=H(b),t=N(b,"META",{name:!0,content:!0}),s=H(b),n=N(b,"META",{property:!0,content:!0}),a=H(b),o=N(b,"META",{property:!0,content:!0}),c=H(b),u=N(b,"META",{property:!0,content:!0}),f=H(b),d=N(b,"META",{property:!0,content:!0}),_=H(b),y=N(b,"META",{name:!0,content:!0}),S=H(b),A=N(b,"META",{property:!0,content:!0}),V=H(b),h=N(b,"META",{name:!0,content:!0}),g=H(b),v=N(b,"META",{name:!0,content:!0}),I=H(b),w=N(b,"META",{name:!0,content:!0}),this.h()},h(){var b,k,U,R,$,q,x,K,T,E,O,j,ne,ee,ie,re;p(t,"name","description"),p(t,"content",((k=(b=i[12])==null?void 0:b.meta)==null?void 0:k.description)||Ue),p(n,"property","og:url"),p(n,"content",r=""+(i[8].url.origin+((U=i[12])==null?void 0:U.path))),p(o,"property","og:title"),p(o,"content",(($=(R=i[12])==null?void 0:R.meta)==null?void 0:$.title)||ze),p(u,"property","og:description"),p(u,"content",((x=(q=i[12])==null?void 0:q.meta)==null?void 0:x.description)||Ue),p(d,"property","og:image"),p(d,"content",((T=(K=i[12])==null?void 0:K.meta)==null?void 0:T.cover)||Qe),p(y,"name","twitter:card"),p(y,"content","summary_large_image"),p(A,"property","twitter:url"),p(A,"content",D=i[8].url.origin+"/"+((E=i[12])==null?void 0:E.path)),p(h,"name","twitter:title"),p(h,"content",((j=(O=i[12])==null?void 0:O.meta)==null?void 0:j.title)||ze),p(v,"name","twitter:description"),p(v,"content",((ee=(ne=i[12])==null?void 0:ne.meta)==null?void 0:ee.description)||Ue),p(w,"name","twitter:image"),p(w,"content",((re=(ie=i[12])==null?void 0:ie.meta)==null?void 0:re.cover)||Qe)},m(b,k){P(b,l,k),P(b,t,k),P(b,s,k),P(b,n,k),P(b,a,k),P(b,o,k),P(b,c,k),P(b,u,k),P(b,f,k),P(b,d,k),P(b,_,k),P(b,y,k),P(b,S,k),P(b,A,k),P(b,V,k),P(b,h,k),P(b,g,k),P(b,v,k),P(b,I,k),P(b,w,k)},p(b,k){var U,R,$,q;k&4096&&e!==(e=((R=(U=b[12])==null?void 0:U.meta)==null?void 0:R.title)||ze)&&(document.title=e),k&256&&r!==(r=""+(b[8].url.origin+(($=b[12])==null?void 0:$.path)))&&p(n,"content",r),k&256&&D!==(D=b[8].url.origin+"/"+((q=b[12])==null?void 0:q.path))&&p(A,"content",D)},d(b){b&&m(l),b&&m(t),b&&m(s),b&&m(n),b&&m(a),b&&m(o),b&&m(c),b&&m(u),b&&m(f),b&&m(d),b&&m(_),b&&m(y),b&&m(S),b&&m(A),b&&m(V),b&&m(h),b&&m(g),b&&m(v),b&&m(I),b&&m(w)}}}function Ul(i){let e,l,t,s,n,r,a,o;Bt(i[18]);const c=[Fl,Bl,Vl],u=[];function f(_,y){return _[12]==null&&_[2]==null?0:_[2]==null?1:2}l=f(i),t=u[l]=c[l](i);let d=i[12]!=null&&Gl(i);return{c(){e=L("div"),t.c(),s=X(),d&&d.c(),n=W()},l(_){e=N(_,"DIV",{});var y=C(e);t.l(y),y.forEach(m),s=H(_);const S=Ft("svelte-185b2j7",document.head);d&&d.l(S),n=W(),S.forEach(m)},m(_,y){P(_,e,y),u[l].m(e,null),P(_,s,y),d&&d.m(document.head,null),M(document.head,n),r=!0,a||(o=[J(window,"resize",i[14]),J(window,"click",i[14]),J(window,"resize",i[18])],a=!0)},p(_,[y]){let S=l;l=f(_),l===S?u[l].p(_,y):(oe(),F(u[S],1,1,()=>{u[S]=null}),fe(),t=u[l],t?t.p(_,y):(t=u[l]=c[l](_),t.c()),B(t,1),t.m(e,null)),_[12]!=null&&d.p(_,y)},i(_){r||(B(t),r=!0)},o(_){F(t),r=!1},d(_){_&&m(e),u[l].d(),_&&m(s),d&&d.d(_),m(n),a=!1,Se(o)}}}function Wl(i,e,l){let t,s,n,r,a,o;se(i,Jt,q=>l(8,t=q)),se(i,Ze,q=>l(9,s=q)),se(i,Be,q=>l(16,n=q)),se(i,Oe,q=>l(10,a=q)),se(i,Pe,q=>l(11,o=q));let{data:c}=e,u,f,d=[...c.posts].find(q=>q.path.includes(t.params.slug)),_,y,S=[],A=[],D,V;const h=be(!1);se(i,h,q=>l(27,r=q));const g=()=>{le(h,r=!0,r)};Ye(async()=>{l(3,y=await ml(d.text)),l(4,S=y.filter(x=>!x.set).map(x=>{var K;return`${ue}/resources/${(K=x.data)==null?void 0:K["o:id"]}`})),l(2,_=await At(y)),le(Ze,s=_,s);const q=localStorage.getItem("selectedLanguage");l(5,A=c.posts.reduce((x,K)=>(!K.path.includes(t.params.slug)&&K.meta.lang==q&&K.links.map(T=>{const E=x.find(j=>j.id===T),O={title:K.meta.title,url:K.path};E?E.essays.some(j=>j.title===O.title&&j.url===O.url)||E.essays.push(O):x.push({id:T,essays:[O]})}),x),[]))});function v(q){Ae.call(this,i,q)}function I(){l(0,u=window.innerWidth)}function w(q){ye[q?"unshift":"push"](()=>{f=q,l(1,f)})}const z=()=>{g(),le(Pe,o=!1,o),l(7,V=f==null?void 0:f.scrollTop)},G=()=>{u<1e3&&(g(),l(7,V=f==null?void 0:f.scrollTop),le(Pe,o=!1,o))},b=()=>{u>1e3&&le(Pe,o=!0,o)},k=()=>{le(Oe,a=D==null?void 0:D.scrollLeft,a)},U=()=>{le(Oe,a=D==null?void 0:D.scrollLeft,a),g()},R=()=>{g()};function $(q){ye[q?"unshift":"push"](()=>{D=q,l(6,D)})}return i.$$set=q=>{"data"in q&&l(15,c=q.data)},i.$$.update=()=>{i.$$.dirty&65536&&g()},[u,f,_,y,S,A,D,V,t,s,a,o,d,h,g,c,n,v,I,w,z,G,b,k,U,R,$]}class Rl extends Ie{constructor(e){super(),Ee(this,e,Wl,Ul,we,{data:15})}}export{Rl as component,Zl as universal};
